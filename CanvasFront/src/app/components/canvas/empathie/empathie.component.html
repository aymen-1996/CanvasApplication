<div class="bloc">
    <div class="element-bmc">

      <div class="header">

        <div class="navbar">
          <div class="css-1ir47a1">
            <a routerLink="/projects" class="no-underline">
              <h2 class="logo"><span style="color: rgb(33, 150, 243)">Canvas</span></h2>
            </a>    <div class="MuiBox-root css-i9gxme"></div>

           
            <div >
                      <button routerLink="/canvas" class="css-10ygcul" tabindex="0" 
              type="button" title="Canvas"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-0 iconify iconify--codicon" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16">
                <path fill="currentColor" d="M13.5 2h-12l-.5.5v11l.5.5h12l.5-.5v-11zM2 3h11v1H2zm7 4H6V5h3zm0 1v2H6V8zM2 5h3v2H2zm0 3h3v2H2zm0 5v-2h3v2zm4 0v-2h3v2zm7 0h-3v-2h3zm0-3h-3V8h3zm-3-3V5h3v2z">

                </path>
              </svg>
                <span class=" css-w0pj6f"></span></button>     
                         <mat-form-field class="custom-select">
                <mat-label>Projet actuel</mat-label>
                <mat-select [(ngModel)]="currentProject">
                  <mat-option>Mes projet</mat-option>
                  <mat-option *ngFor="let project of projects" [value]="project" (click)="navigateToEmpathy(project)">
                    {{ project.nomProjet }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
        
        <div class="dropdown-container">
          <button class="css-tfolz5" tabindex="0" type="button" (click)="togglePendingInvitesDropdown()">
            <span class="BaseBadge-root MuiBadge-root css-1rzb3uu">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-1wl1iil iconify iconify--ant-design" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024">
                <path fill="currentColor" fill-opacity=".15" d="M477.5 536.3L135.9 270.7l-27.5-21.4l27.6 21.5V792h752V270.8L546.2 536.3a55.99 55.99 0 0 1-68.7 0"></path><path fill="currentColor" fill-opacity=".15" d="m876.3 198.8l39.3 50.5l-27.6 21.5l27.7-21.5l-39.3-50.5z"></path><path fill="currentColor" d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32m-94.5 72.1L512 482L190.5 232.1zm54.5 38.7V792H136V270.8l-27.6-21.5l27.5 21.4l341.6 265.6a55.99 55.99 0 0 0 68.7 0zl27.6-21.5l-39.3-50.5h.1l39.3 50.5z"></path>
            </svg>
            <span class="BaseBadge-badge BaseBadge-invisible MuiBadge-badge MuiBadge-standard MuiBadge-invisible MuiBadge-anchorOriginTopRight MuiBadge-anchorOriginTopRightRectangular MuiBadge-overlapRectangular MuiBadge-colorError css-1kr17ld">0</span></span>
            <span class="MuiTouchRipple-root css-w0pj6f"></span>
          </button>
        
          <div *ngIf="pendingInvitesCount > 0" class="badge">{{ pendingInvitesCount }}</div>
        
          <div class="dropdown-content" *ngIf="showPendingInvitesDropdown">
            <ng-container *ngIf="pendingInvites && pendingInvites.length > 0; else noInvites">
              <div *ngFor="let invite of pendingInvites" class="dropdown-item" (click)="openPopup1(invite.idInvite)">
                <p class="invite">Vous avez une Invitation dans <br><strong>{{ invite.canvas.nomCanvas}}</strong> de projet <strong>{{ invite.projet.nomProjet }}</strong></p>
              </div>
            </ng-container>
            <ng-template #noInvites>
              <div class="dropdown-item">
                <p class="no-invite">Aucune invitation en attente.</p>
              </div>
            </ng-template>
          
           
          </div>
        </div>
        <button class="css-tfolz5" tabindex="0" type="button" [matMenuTriggerFor]="notificationsMenu" (click)="toggleDropdown1()"><span class=" css-1rzb3uu">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-1wl1iil iconify iconify--clarity" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36">
            <path fill="currentColor" d="M32.51 27.83A14.4 14.4 0 0 1 30 24.9a12.6 12.6 0 0 1-1.35-4.81v-4.94A10.81 10.81 0 0 0 19.21 4.4V3.11a1.33 1.33 0 1 0-2.67 0v1.31a10.81 10.81 0 0 0-9.33 10.73v4.94a12.6 12.6 0 0 1-1.35 4.81a14.4 14.4 0 0 1-2.47 2.93a1 1 0 0 0-.34.75v1.36a1 1 0 0 0 1 1h27.8a1 1 0 0 0 1-1v-1.36a1 1 0 0 0-.34-.75M5.13 28.94a16.2 16.2 0 0 0 2.44-3a14.2 14.2 0 0 0 1.65-5.85v-4.94a8.74 8.74 0 1 1 17.47 0v4.94a14.2 14.2 0 0 0 1.65 5.85a16.2 16.2 0 0 0 2.44 3Z" class="clr-i-outline clr-i-outline-path-1">

            </path>
            <path fill="currentColor" d="M18 34.28A2.67 2.67 0 0 0 20.58 32h-5.26A2.67 2.67 0 0 0 18 34.28" class="clr-i-outline clr-i-outline-path-2"></path><path fill="none" d="M0 0h36v36H0z"></path></svg><span class="BaseBadge-badge BaseBadge-invisible MuiBadge-badge MuiBadge-standard MuiBadge-invisible MuiBadge-anchorOriginTopRight MuiBadge-anchorOriginTopRightRectangular MuiBadge-overlapRectangular MuiBadge-colorError css-1kr17ld">0</span></span>
          <span class="MuiTouchRipple-root css-w0pj6f">

          </span>
        </button>
        <mat-badge [matBadge]="unreadNotificationCount"  [matBadgeHidden]="unreadNotificationCount === 0" matBadgeColor="accent" matBadgePosition="above after"></mat-badge>

<mat-menu #notificationsMenu="matMenu" class="notifications-menu">
<div class="menu-container">
<div *ngIf="notifications.length > 0; else noNotifications" >
<button mat-menu-item *ngFor="let notification of notifications" class="dropdown-item" 
  [ngStyle]="{ 'background-color':notification.isRead ?'transparent': '#d0dde9' }">
  <div 
  [ngStyle]="{
    

    'position': 'absolute',
    'bottom': '0',
    'left': '0',
    'width': '100%',
    'height': '3px', 
    'background-color': notification.isRead ?'transparent': 'white' 
  
}">
</div>
  <p class="invite">{{ notification.message }}</p>
</button>
</div>
<ng-template #noNotifications>
<button mat-menu-item disabled>
  Aucune notification à afficher.
</button>
</ng-template>
</div>
</mat-menu>
        
              <div class="dropdown-container">

                <button (click)="toggleDropdown()" class="css-w5qhhs" tabindex="0" type="button"><div class="css-1ciwozm"><img alt="photoURL" [src]="userPhotoUrl" class="css-1hy9t21"></div><span class="css-w0pj6f"></span></button>
              
                <div class="dropdown-content" *ngIf="showDropdown">
                  <div (click)="logout()" class="dropdown-item">
                    <mat-icon>logout</mat-icon> <p class="mat">Deconnexion</p>
                  </div>
                  <div routerLink="/profil"  class="dropdown-item">
                    <mat-icon>settings</mat-icon> <p class="mat">Paramétre</p>
                  </div>
                </div>
              </div>
              
              
              
                  </div>
           
        
          </div>  
        
        </div>
            </div>


                   <!------------partie comment--------------------->
                   <div class="chat-container"   *ngIf="showComments">
                    <div class="messages">
                      <div class="message">
                        <div class="message-header">
                          <div style="display: flex; align-items: center;">
                            <img src="https://funderapi.cynoia.com//media/avatar.png" class="avatar" alt="User Avatar">
                            <div class="username">You</div>
                          </div>
                          <div class="timestamp">Le 09/10/2024 à 09:02</div>
                        </div>
                        <audio src="https://funderapi.cynoia.com//media/audio.mp3" controls class="audio"></audio>
                      </div>
                      <div class="message">
                        <div class="message-header">
                          <div style="display: flex; align-items: center;">
                            <img src="https://funderapi.cynoia.com//media/avatar.png" class="avatar" alt="User Avatar">
                            <div class="username">You</div>
                          </div>
                          <div class="timestamp">Le 09/10/2024 à 09:00</div>
                        </div>
                        <p>mmm</p>
                      </div>
                      <div class="message">
                        <div class="message-header">
                          <div style="display: flex; align-items: center;">
                            <img src="https://funderapi.cynoia.com//media/avatar.png" class="avatar" alt="User Avatar">
                            <div class="username">You</div>
                          </div>
                          <div class="timestamp">Le 09/10/2024 à 09:00</div>
                        </div>
                        <p>aaa</p>
                      </div>
                    </div>
                    <form class="input-container">
                      <button type="button">
                        <span class="material-icons">attach_file</span>
                      </button>
                      <input type="text" placeholder="Type a message...">
                      <button type="submit">
                        <span class="material-icons">send</span>
                      </button>
                    </form>
                  </div>
      
      
            <!------------partie canvas--------------------->
    <div class="items-bmc" [ngClass]="{'narrow': showComments}">
      <div class="item-bmc" *ngIf="blocks  && blocks?.length > 0">
        <div *ngIf="shouldDisplayMesg()"> <p class="css-tq1709">Enregistré <mat-icon>done</mat-icon></p></div>   
          <div>
            <div class="icon-container" [ngClass]="{'shift-left': showComments , 'narrow': currentBlockIndex === 6}">
              <span class="tooltip" *ngIf="!showComments">voir les commentaires</span> 
              <i (click)="toggleComments()" class="material-icons" >comment</i>
            </div>
            
            <mat-stepper *ngIf="userRole?.roleInvite === 'editor'" #stepper class="demo-stepper"  (selectionChange)="onStepChange($event)" >

            <mat-step>            
              <p class="css-vgwlcw">Etape 1 </p>
              <div class="MuiBox-root css-igeghr">
                {{blocks[0].description}}
                            </div>
            </mat-step>
             <mat-step>            
              <p class="css-vgwlcw">Etape 2 </p>
              <div class="MuiBox-root css-igeghr">
                {{blocks[1].description}}
              </div>
            </mat-step>
             <mat-step>            
              <p class="css-vgwlcw">Etape 3 </p>
              <div class="MuiBox-root css-igeghr">
                {{blocks[2].description}}            
                </div>
            </mat-step>
            <mat-step>            
              <p class="css-vgwlcw">Etape 4 </p>
              <div class="MuiBox-root css-igeghr">
                {{blocks[3].description}}         
                   </div>
            </mat-step>
            <mat-step>            
              <p class="css-vgwlcw">Etape 5</p>
              <div class="MuiBox-root css-igeghr">
                {{blocks[4].description}}      
                      </div>
            </mat-step>
            <mat-step>            
              <p class="css-vgwlcw">Etape 6</p>
              <div class="MuiBox-root css-igeghr">
                {{blocks[5].description}}
              </div>
            </mat-step>
            <mat-step>            
                <p class="css-vgwlcw">Etape 7</p>
                <div class="MuiBox-root css-igeghr">
                    Sommaire
                </div>
              </mat-step>
          </mat-stepper>
        </div>
         <div class="css-1tfsht7" > 
          <div  class="css-9bzmof" *ngIf="!showTable && userRole?.roleInvite === 'editor'">
            <div class="container" style="margin-right: auto; margin-left: auto; padding-right: 15px; padding-left: 15px; max-height: 350px; overflow-y: auto;">
              <div class="notes-list" style="width: 112%; display: grid; grid-template-columns: 1fr 1fr 1fr;">
                <form [formGroup]="donneesForm" *ngIf="showAddButton && donnees?.length < 3">
                  <div class="MuiBox-root css-4xg6x2" title="Ajouter un post-it" (click)="creatColor()">
                    <mat-icon>add</mat-icon>
                  </div>
                </form>
                
                <div [style.backgroundColor]="donnees?.coleur " class="note MuiBox-root css-1sdqa4j" (click)="toggleDeleteButton(donnees)" *ngFor="let donnees of donnees">
                  <div >
                    <div *ngIf="showDeleteButton && isSelectedDonnee(donnees)" class="note-action MuiBox-root css-cpm1aj">
                      <button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium css-1m32rbj" tabindex="0" type="button">
                        <svg  style=" position: absolute;top: 0; left: 0;" (click)="toggleFormVisibility(donnees.idDonnees)" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img"
                          class="MuiBox-root css-3o0h5k iconify iconify--akar-icons" sx="[object Object]" width="1em" height="1em"
                          preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
                          <g fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="4" cy="12" r="1"></circle>
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="20" cy="12" r="1"></circle>
                          </g>
                        </svg>
                        
                        <form (click)="toggleFormVisibility(donnees.idDonnees)"*ngIf="isFormVisibleForItemId(donnees.idDonnees)" class="color-form">

                        <ng-container  *ngFor="let group of groupColors(generatedColors)">
                          <div  class="color-group">
                            <div class="circle" *ngFor="let color of group" [style.background-color]="color"  (click)="updateColor(donnees.idDonnees, color)"></div>
                          </div>
                        </ng-container>
                        <svg (click)="openPopup(donnees.idDonnees)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                          <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
                        </svg> 
                        <span class="MuiTouchRipple-root css-w0pj6f"></span>
                      </form>

                      </button>
                    </div>
                    <form [formGroup]="donneesForms" >
                      <textarea
                      (keydown.enter)="onEnterKey($event)"
                      (input)="updateTicketValue($event)"
                      (keyup.enter)="updatedonne(donnees.idDonnees)"
                      (blur)="updatedonne(donnees.idDonnees)"

                      maxlength="150"
                      style="color: inherit; background: transparent; border: none; outline: none; height: 100%; width: 100%; resize: none; font-family: inherit; font-size: inherit; font-weight: inherit; font-style: inherit; word-break: break-word;"
                    >{{ donnees.ticket}}</textarea>
                    
                    </form>
                    
                  </div>
                  
                </div>
                
                
                
              
              </div>
          
            </div>
              
          
                                 </div>
                     <div class="button-container" [ngClass]="{'centerbtn':userRole?.roleInvite === 'moniteur' }">
                      <button class="download-button" *ngIf="showTable ||userRole?.roleInvite === 'moniteur' " mat-raised-button color="primary" (click)="telechargerPDF()">Télécharger en PDF</button>
                      <button *ngIf="showTable && userRole?.roleInvite === 'editor'" class="download-button" mat-raised-button color="primary" (click)="openPopupInvite()">Envoyer Invitation</button>
                    </div>
            <div class="wrapper" *ngIf="!showTable && userRole?.roleInvite === 'editor'">
               <div class="canvas">
                <div class="MuiGrid-root MuiGrid-item MuiGrid-grid-md-7 css-1odkrke" >
                    <div class="MuiBox-root css-1xli2ds" [ngClass]="{'narrow': showComments}" >
                        <div class="MuiBox-root css-1iwfbct" [ngClass]="{'narrow': showComments}">
                            <div class="MuiBox-root css-1f7kqzk"  >
                            
                            </div>
                            <div class="MuiBox-root css-1h4xcdt">
                                <div class="MuiBox-root css-19mel1j" (click)="detectedBlockById(blocks[0].idBlock)"   [ngClass]="{ 'selected': isSelected(blocks[0].idBlock) }"
                                [ngStyle]="{ 'background-color': isSelected(blocks[0].idBlock) ? 'rgb(247, 222, 58)' : '' }"
                                (click)="toggleSelection(blocks[0].idBlock)">

                                </div>
                            </div>
                            <div class="MuiBox-root css-150hu08">
                                <div class="MuiBox-root css-1lxpb6t" (click)="detectedBlockById(blocks[1].idBlock)"   [ngClass]="{ 'selected': isSelected(blocks[1].idBlock) }"
                                [ngStyle]="{ 'background-color': isSelected(blocks[1].idBlock) ? 'rgb(247, 222, 58)' : '' }"
                                (click)="toggleSelection(blocks[1].idBlock)">

                                </div>
                            </div>
                                <div class="MuiBox-root css-8zkixo">
                                    <div class="MuiBox-root css-1nhy4ip" (click)="detectedBlockById(blocks[2].idBlock)"   [ngClass]="{ 'selected': isSelected(blocks[2].idBlock) }"
                                    [ngStyle]="{ 'background-color': isSelected(blocks[2].idBlock) ? 'rgb(247, 222, 58)' : '' }"
                                    (click)="toggleSelection(blocks[2].idBlock)">
                                    </div>
                                </div>
                                <div class="MuiBox-root css-ja1rpf">
                                    <div class="MuiBox-root css-bw4gw7"(click)="detectedBlockById(blocks[3].idBlock)"   [ngClass]="{ 'selected': isSelected(blocks[3].idBlock) }"
                                    [ngStyle]="{ 'background-color': isSelected(blocks[3].idBlock) ? 'rgb(247, 222, 58)' : '' }"
                                    (click)="toggleSelection(blocks[3].idBlock)">
                                    </div>
                                </div>
                                <div class="MuiBox-root css-scatei">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-uwwqev iconify iconify--iconoir" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path fill="currentColor" d="M15.5 9a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1"></path><path d="M21.542 15A9.997 9.997 0 0 0 22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10c4.478 0 8.268-2.943 9.542-7m0 0H17"></path></g></svg>
              </div>
            </div>
            <div class="MuiBox-root css-164txr8"[ngClass]="{'narrow': showComments}">
              <div class="MuiBox-root css-3bgeuq" (click)="detectedBlockById(blocks[4].idBlock)"  [ngClass]="{ 'selected': isSelected(blocks[4].idBlock) }" (click)="toggleSelection(blocks[4].idBlock)">
                <small style="display: flex; justify-content: center;">
                    <p style="border-top: none; border-right: 1px solid black; border-bottom: 1px solid black; border-left: 1px solid black; border-image: initial; padding: 3px;">PROBLEMES</p></small>
                    <div class="MuiBox-root css-1xh0ujl">

                   </div>
                   <div style=" display: flex;">
                    <div *ngFor="let donnee of blocks[4]?.donnees; let i = index" 
                         [style.backgroundColor]="donnee?.coleur" 
                         class="kqsxjs1" 
                         [style.width]="calculateWidth(blocks[4]?.donnees?.length)"
                         [style.marginRight]="i < 2 ? '5px' : '0'">
                      <p>{{donnee.ticket}}</p>
                    </div>
                  </div>

                                      
                </div>
                <div class="MuiBox-root css-aq3lkq" (click)="detectedBlockById(blocks[5].idBlock)"  [ngClass]="{ 'selected': isSelected(blocks[5].idBlock) }" (click)="toggleSelection(blocks[5].idBlock)">
                    <small style="display: flex; justify-content: center;">
                        <p style="border-top: none; border-right: 1px solid black; border-bottom: 1px solid black; border-left: 1px solid black; border-image: initial; padding: 3px;">BESOINS</p>
                    </small>
                    <div class="MuiBox-root css-1xh0ujl">

                     
                    </div>
                    <div style=" display: flex;">
                      <div *ngFor="let donnee of blocks[5]?.donnees; let i = index" 
                           [style.backgroundColor]="donnee?.coleur" 
                           class="kqsxjs1" 
                           [style.width]="calculateWidth(blocks[5]?.donnees?.length)"
                           [style.marginRight]="i < 2 ? '5px' : '0'">
                        <p>{{donnee.ticket}}</p>
                      </div>
                    </div>
                </div>
            </div>
        </div>
            
       
            </div>  
            </div>
            <div *ngFor="let donnee of blocks[0].donnees; let i = index">
              <div [style.backgroundColor]="donnee?.coleur"  class="MuiBox-root css-v04ws1"
              [ngStyle]="calculatePositionBlock1(i)">
                <p class="title1">{{donnee?.ticket}}</p>
              </div>
            </div>
      
      
            <div *ngFor="let donnee of blocks[1].donnees; let i = index">
              <div [style.backgroundColor]="donnee?.coleur"  class="MuiBox-root css-1kpke41"
              [ngStyle]="calculatePositionBlock3(i)">
                <p class="title1">{{donnee?.ticket}}</p>
              </div>
            </div>
            <div *ngFor="let donnee of blocks[3].donnees; let i = index">
              <div [style.backgroundColor]="donnee?.coleur"  class="MuiBox-root css-1kpke41"
              [ngStyle]="calculatePositionBlock2(i)">
                <p class="title1">{{donnee?.ticket}}</p>
              </div>
            </div>
  
            <div *ngFor="let donnee of blocks[2].donnees; let i = index">
              <div [style.backgroundColor]="donnee?.coleur"  class="MuiBox-root css-1kpke41"
              [ngStyle]="calculatePositionBlock7(i)">
                <p class="title1">{{donnee?.ticket}}</p>
              </div>
            </div>
          </div>
        
          <div id="tableau"  class="canvas" *ngIf="showTable && userRole?.roleInvite === 'editor' || userRole?.roleInvite === 'moniteur' " class="user" >
            <div  >
             <div  class="MuiGrid-root MuiGrid-item MuiGrid-grid-md-7 css-1odkrke" [ngClass]="{'center':userRole?.roleInvite === 'moniteur' }">
                 <div class="MuiBox-root css-1xli2ds">
                     <div class="MuiBox-root css-1iwfbct">
                         <div class="MuiBox-root css-1f7kqzk"  >
                         
                         </div>
                         <div class="MuiBox-root css-1h4xcdt">
                             <div class="MuiBox-root css-19mel1j" (click)="detectedBlockById(blocks[0].idBlock)"   [ngClass]="{ 'selected': isSelected(blocks[0].idBlock)&& userRole?.roleInvite !== 'moniteur'}"
                             (click)="toggleSelection(blocks[0].idBlock)">

                             </div>
                         </div>
                         <div class="MuiBox-root css-150hu08">
                             <div class="MuiBox-root css-1lxpb6t" (click)="detectedBlockById(blocks[1].idBlock)"   [ngClass]="{ 'selected': isSelected(blocks[1].idBlock) }"
                             [ngStyle]="{ 'background-color': isSelected(blocks[1].idBlock) ? 'rgb(247, 222, 58)' : '' }"
                             (click)="toggleSelection(blocks[1].idBlock)">

                             </div>
                         </div>
                             <div class="MuiBox-root css-8zkixo">
                                 <div class="MuiBox-root css-1nhy4ip" (click)="detectedBlockById(blocks[2].idBlock)"   [ngClass]="{ 'selected': isSelected(blocks[2].idBlock) }"
                                 [ngStyle]="{ 'background-color': isSelected(blocks[2].idBlock) ? 'rgb(247, 222, 58)' : '' }"
                                 (click)="toggleSelection(blocks[2].idBlock)">
                                 </div>
                             </div>
                             <div class="MuiBox-root css-ja1rpf">
                                 <div class="MuiBox-root css-bw4gw7"(click)="detectedBlockById(blocks[3].idBlock)"   [ngClass]="{ 'selected': isSelected(blocks[3].idBlock) }"
                                 [ngStyle]="{ 'background-color': isSelected(blocks[3].idBlock) ? 'rgb(247, 222, 58)' : '' }"
                                 (click)="toggleSelection(blocks[3].idBlock)">
                                 </div>
                             </div>
                             <div class="MuiBox-root css-scatei">
             <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-uwwqev iconify iconify--iconoir" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path fill="currentColor" d="M15.5 9a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1"></path><path d="M21.542 15A9.997 9.997 0 0 0 22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10c4.478 0 8.268-2.943 9.542-7m0 0H17"></path></g></svg>
           </div>
         </div>
         <div class="MuiBox-root css-164txr8">
           <div class="MuiBox-root css-3bgeuq" (click)="detectedBlockById(blocks[4].idBlock)"  [ngClass]="{ 'selected': isSelected(blocks[4].idBlock) }" (click)="toggleSelection(blocks[4].idBlock)">
             <small style="display: flex; justify-content: center;">
                 <p style="border-top: none; border-right: 1px solid black; border-bottom: 1px solid black; border-left: 1px solid black; border-image: initial; padding: 3px;">PROBLEMES</p></small>
                 <div class="MuiBox-root css-1xh0ujl">

                 </div>
                 <div style=" display: flex;">
                  <div *ngFor="let donnee of blocks[4]?.donnees; let i = index" 
                       [style.backgroundColor]="donnee?.coleur" 
                       class="kqsxjs1" 
                       [style.width]="calculateWidth(blocks[4]?.donnees?.length)"
                       [style.marginRight]="i < 2 ? '5px' : '0'">
                    <p>{{donnee.ticket}}</p>
                  </div>
                </div>
             </div>
             <div class="MuiBox-root css-aq3lkq" (click)="detectedBlockById(blocks[5].idBlock)"  [ngClass]="{ 'selected': isSelected(blocks[5].idBlock) }" (click)="toggleSelection(blocks[6].idBlock)">
                 <small style="display: flex; justify-content: center;">
                     <p style="border-top: none; border-right: 1px solid black; border-bottom: 1px solid black; border-left: 1px solid black; border-image: initial; padding: 3px;">BESOINS</p>
                 </small>
                 <div class="MuiBox-root css-1xh0ujl">
                   

                 </div>
                 <div style=" display: flex;">
                  <div *ngFor="let donnee of blocks[5]?.donnees; let i = index" 
                       [style.backgroundColor]="donnee?.coleur" 
                       class="kqsxjs1" 
                       [style.width]="calculateWidth(blocks[5]?.donnees?.length)"
                       [style.marginRight]="i < 2 ? '5px' : '0'">
                    <p>{{donnee.ticket}}</p>
                  </div>
                </div>
             </div>
         </div>
     </div>
         
    
         </div>  
         
        </div>
        <div *ngFor="let donnee of blocks[0].donnees; let i = index" >
          <div [ngClass]="{'center-container':userRole?.roleInvite === 'moniteur' , 'narrow': showComments && userRole?.roleInvite === 'moniteur'}" [style.backgroundColor]="donnee?.coleur"  class="MuiBox-root css-v04ws1"
          [ngStyle]="calculatePositionBlock4(i)">
            <p class="title1">{{donnee?.ticket}}</p>
          </div>
        </div>
  
        <div *ngFor="let donnee of blocks[2].donnees; let i = index">
         <div [ngClass]="{'center-container':userRole?.roleInvite === 'moniteur' , 'narrow': showComments && userRole?.roleInvite === 'moniteur'}" [style.backgroundColor]="donnee?.coleur"  class="MuiBox-root css-1kpke41"
         [ngStyle]="calculatePositionBlock8(i)">
           <p class="title1">{{donnee?.ticket}}</p>
         </div>
       </div>
        <div *ngFor="let donnee of blocks[3].donnees; let i = index">
          <div [ngClass]="{'center-container':userRole?.roleInvite === 'moniteur' , 'narrow': showComments && userRole?.roleInvite === 'moniteur'}" [style.backgroundColor]="donnee?.coleur"  class="MuiBox-root css-1kpke41"
          [ngStyle]="calculatePositionBlock5(i)">
            <p class="title1">{{donnee?.ticket}}</p>
          </div>
        </div>
  
        <div *ngFor="let donnee of blocks[1].donnees; let i = index">
          <div [ngClass]="{'center-container':userRole?.roleInvite === 'moniteur' , 'narrow': showComments && userRole?.roleInvite === 'moniteur'}" [style.backgroundColor]="donnee?.coleur"  class="MuiBox-root css-1kpke41"
          [ngStyle]="calculatePositionBlock6(i)">
            <p class="title1">{{donnee?.ticket}}</p>
          </div>

      
        </div>
       </div>
      </div> 

    
      <div class="css-1xto6kq" >
        <button class="css-5357ut" *ngIf="userRole?.roleInvite !== null"  [ngClass]="{'btn-container':showTable || userRole?.roleInvite === 'moniteur' }"
        tabindex="0" 
        type="button" 
        (click)="precedent()" 
        [disabled]="userRole?.roleInvite === 'moniteur' || currentBlockIndex === 0 ">
    Précédent
    <span class="css-w0pj6f"></span>
    </button>
            <div class="css-11qjisw" >
            </div> 
            <button *ngIf="shouldDisplayButton()"class="css-ivnzlx"  tabindex="0" type="button" (click)="suivant()">
              {{ currentBlockIndex === 5 ? 'Terminer' : 'Suivant' }}
              <span class="css-w0pj6f"></span>
    
            </button>
         
    </div>
      </div>
     
    </div>
  </div>
  </div>
  
  <div class="centered-message" *ngIf="userRole?.roleInvite === null">
    <p>tu n'as pas le droit dans cette canvas. Attendre une invitation ou contacter le superviseur de projet.</p>
  </div>