
<div class="css-1byr0tz ">
  
  <div class="header">

    <div class="css-1t1eosl">
      <div class="css-1ir47a1">
        <a routerLink="/projects" class="no-underline">
          <h2 class="logo"><span style="color: rgb(33, 150, 243)">Canvas</span></h2>
        </a>    <div class="MuiBox-root css-i9gxme"></div>

       
        <div class="css-1x4nai">
        <button routerLink="/canvas" class="css-10ygcul" tabindex="0" 
          type="button" title="Canvas"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-0 iconify iconify--codicon" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16">
            <path fill="currentColor" d="M13.5 2h-12l-.5.5v11l.5.5h12l.5-.5v-11zM2 3h11v1H2zm7 4H6V5h3zm0 1v2H6V8zM2 5h3v2H2zm0 3h3v2H2zm0 5v-2h3v2zm4 0v-2h3v2zm7 0h-3v-2h3zm0-3h-3V8h3zm-3-3V5h3v2z">

            </path>
          </svg>
            <span class=" css-w0pj6f"></span></button>  

          <mat-icon 
          routerLink="/chat" 
          class="maticon1" 
          matBadge="{{ messageCount }}" 
          matBadgeColor="warn" 
          matBadgePosition="above after" 
          [matBadgeHidden]="messageCount === 0"> 
          chat
        </mat-icon>

          <div class="dropdown-container">

            <button class="css-tfolz5" tabindex="0" type="button" (click)="togglePendingInvitesDropdown()">
              <span class="BaseBadge-root MuiBadge-root css-1rzb3uu">
                <svg 
                [ngStyle]="{'fill': showPendingInvitesDropdown ? 'rgb(33, 150, 243)' : 'currentColor'}"
                xmlns="http://www.w3.org/2000/svg" 
                xmlns:xlink="http://www.w3.org/1999/xlink" 
                aria-hidden="true" 
                role="img" 
                class="MuiBox-root css-1wl1iil iconify iconify--ant-design" 
                width="1em" 
                height="1em" 
                preserveAspectRatio="xMidYMid meet" 
                viewBox="0 0 1024 1024">
                <path 
                  [ngStyle]="{'fill': showPendingInvitesDropdown ? 'rgb(33, 150, 243)' : 'currentColor'}" 
                  fill-opacity=".15" 
                  d="M477.5 536.3L135.9 270.7l-27.5-21.4l27.6 21.5V792h752V270.8L546.2 536.3a55.99 55.99 0 0 1-68.7 0">
                </path>
                <path 
                  [ngStyle]="{'fill': showPendingInvitesDropdown ? 'rgb(33, 150, 243)' : 'currentColor'}" 
                  fill-opacity=".15" 
                  d="m876.3 198.8l39.3 50.5l-27.6 21.5l27.7-21.5l-39.3-50.5z">
                </path>
                <path 
                  [ngStyle]="{'fill': showPendingInvitesDropdown ? 'rgb(33, 150, 243)' : 'currentColor'}" 
                  d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32m-94.5 72.1L512 482L190.5 232.1zm54.5 38.7V792H136V270.8l-27.6-21.5l27.5 21.4l341.6 265.6a55.99 55.99 0 0 0 68.7 0zl27.6-21.5l-39.3-50.5h.1l39.3 50.5z">
                </path>
              </svg>
              
              <span class="BaseBadge-badge BaseBadge-invisible MuiBadge-badge MuiBadge-standard MuiBadge-invisible MuiBadge-anchorOriginTopRight MuiBadge-anchorOriginTopRightRectangular MuiBadge-overlapRectangular MuiBadge-colorError css-1kr17ld">0</span></span>
              <span class="MuiTouchRipple-root css-w0pj6f"></span>
            </button>
                    <div *ngIf="pendingInvitesCount > 0" class="badge">{{ pendingInvitesCount }}</div>

          </div >
          
          <div *ngIf="showPendingInvitesDropdown" class="css-1oknx5t">
            <span class="arrow css-98b6ta"></span>
            <div class="MuiBox-root css-3sojac">
              <div class="MuiBox-root css-i9gxme">
                <h6 class="MuiTypography-root MuiTypography-subtitle1 css-k9tjo5">Invitations</h6>
                <p class="MuiTypography-root MuiTypography-body2 css-11r9ii4">Vous avez {{ pendingInvitesCount }} invitations</p>
                <hr class="MuiDivider-root MuiDivider-fullWidth css-zg4d8h">
                <div class="scroll-container">
                  <div class="css-jjtu05">
                    <div data-simplebar="init" class="css-qw2e6q">
                  <ul class="css-1uzmcsd">
                      <ng-container *ngIf="pendingInvites && pendingInvites.length > 0">
                        <li *ngFor="let invite of pendingInvites" class="css-12ujxra" (click)="openPopup1(invite.idInvite)" tabindex="0" role="button">
                          <div class="css-k008qs" style="display: flex; align-items: center;">
                              <img alt="User Avatar" [src]="projectImages[invite.projet.idProjet]" style="width: 60px; object-fit: cover; margin-right: 1em;">
                              <small class="justified-text">
                                <p><strong>{{ invite.projet.user.nomUser }}</strong> vous a envoy√© une invitation pour rejoindre le projet <strong>{{ invite.projet.nomProjet }}</strong> dans <strong>{{ invite.canvas.nomCanvas }}</strong> en tant que <strong>{{ invite.roleInvite }}</strong>.</p>
                            </small>                              
                          </div>
                          <span class="MuiTouchRipple-root css-w0pj6f"></span>
                      </li>
                    </ng-container>
                  </ul>
                </div>
                </div>
                </div>
              </div>
            </div>
            <hr class="MuiDivider-root MuiDivider-fullWidth css-zg4d8h">
       
            </div>
          
          <div>
    <button class="css-tfolz51" tabindex="0" type="button"  (click)="toggleDropdown1()"><span class=" css-1rzb3uu">
      <svg 
      [ngStyle]="{'fill': isDropdownVisible ? 'rgb(33, 150, 243)' : 'currentColor'}" 
      xmlns="http://www.w3.org/2000/svg" 
      aria-hidden="true" 
      role="img" 
      class="MuiBox-root css-1wl1iil iconify iconify--clarity" 
      width="1em" 
      height="1em" 
      preserveAspectRatio="xMidYMid meet" 
      viewBox="0 0 36 36">
      <path 
          [ngStyle]="{'fill': isDropdownVisible ? 'rgb(33, 150, 243)' : 'currentColor'}" 
          d="M32.51 27.83A14.4 14.4 0 0 1 30 24.9a12.6 12.6 0 0 1-1.35-4.81v-4.94A10.81 10.81 0 0 0 19.21 4.4V3.11a1.33 1.33 0 1 0-2.67 0v1.31a10.81 10.81 0 0 0-9.33 10.73v4.94a12.6 12.6 0 0 1-1.35 4.81a14.4 14.4 0 0 1-2.47 2.93a1 1 0 0 0-.34.75v1.36a1 1 0 0 0 1 1h27.8a1 1 0 0 0 1-1v-1.36a1 1 0 0 0-.34-.75M5.13 28.94a16.2 16.2 0 0 0 2.44-3a14.2 14.2 0 0 0 1.65-5.85v-4.94a8.74 8.74 0 1 1 17.47 0v4.94a14.2 14.2 0 0 0 1.65 5.85a16.2 16.2 0 0 0 2.44 3Z" 
          class="clr-i-outline clr-i-outline-path-1">
      </path>
      <path 
          [ngStyle]="{'fill': isDropdownVisible ? 'rgb(33, 150, 243)' : 'currentColor'}" 
          d="M18 34.28A2.67 2.67 0 0 0 20.58 32h-5.26A2.67 2.67 0 0 0 18 34.28" 
          class="clr-i-outline clr-i-outline-path-2">
      </path>
      <path fill="none" d="M0 0h36v36H0z"></path>
  </svg>
        <span class="BaseBadge-badge BaseBadge-invisible MuiBadge-badge MuiBadge-standard MuiBadge-invisible MuiBadge-anchorOriginTopRight MuiBadge-anchorOriginTopRightRectangular MuiBadge-overlapRectangular MuiBadge-colorError css-1kr17ld">0</span></span>
      <span class="MuiTouchRipple-root css-w0pj6f">

      </span>
    </button>
    <span *ngIf="unreadNotificationCount > 0" class="custom-badge">
      {{ unreadNotificationCount }}
    </span>     
     <div *ngIf="isDropdownVisible" class="css-1oknx5t" tabindex="-1" style="opacity: 1; transform: none; transition: opacity 228ms cubic-bezier(0.4, 0, 0.2, 1), transform 152ms cubic-bezier(0.4, 0, 0.2, 1); top: 47px; margin-left: -317px !important; transform-origin: 360px 0px;">
      <span class="arrow css-98b6ta">

      </span>
      <div class="css-3sojac" >
        <div class="css-i9gxme">
          <h6 class="css-k9tjo5">Notifications</h6>
         
          <ng-container *ngIf="notifications.length > 0; else noNotifications" >
        <div class="notification-list">
                <div *ngFor="let notification of notifications" class="dropdown-item" [class.unread]="!notification.isRead"
                     [ngStyle]="{ 'background-color': notification.isRead ? 'transparent' : '#d0dde9' }">
                    <p class="css-11r9ii4" [ngStyle]="{
                        'color': notification.isRead === false ? 'black' : 'black'}">{{ notification.message }}</p>
                    <div [ngStyle]="{
                        'position': 'absolute',
                        'bottom': '0',
                        'left': '0',
                        'width': '100%',
                        'height': '3px',
                        'background-color': notification.isRead ? 'transparent' : 'white'
                    }"></div>
              </div>
              </div>
        </ng-container>

          <ng-template #noNotifications>
            <p class="css-11r9ii4">Vous avez 0 notifications</p>
          </ng-template>
         
        </div>
      </div>
      
    </div>
</div>


<div class="popover-wrapper"  >

            <button (click)="toggleDropdown()" class="css-w5qhhs" tabindex="0" type="button"><div class="css-1ciwozm"><img alt="photoURL" [src]="userPhotoUrl" class="css-1hy9t21"></div><span [ngStyle]="{
              'background-color': showDropdown ? 'rgba(0, 0, 0, 0.6)' : 'transparent'
          }" class="css-w0pj6f"></span></button>
          
            <div *ngIf="showDropdown" class="popover-container" tabindex="-1">
              <span class="arrow css-98b6ta"></span>
                              <div class="popover-content">
                <h6 class="title">{{users.user.nomUser}} {{users.user.prenomUser}}</h6>
                <p class="email">{{users.user.emailUser}}</p>
              </div>
              <hr class="divider">
              <div class="menu">
                <a routerLink="/canvas" class="menu-item">
                  <div class="menu-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-0 iconify iconify--codicon" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16">
                      <path fill="currentColor" d="M13.5 2h-12l-.5.5v11l.5.5h12l.5-.5v-11zM2 3h11v1H2zm7 4H6V5h3zm0 1v2H6V8zM2 5h3v2H2zm0 3h3v2H2zm0 5v-2h3v2zm4 0v-2h3v2zm7 0h-3v-2h3zm0-3h-3V8h3zm-3-3V5h3v2z">
          
                      </path>
                    </svg>
                  </div>
                  Canvas
                </a>
                <a routerLink="/profil" class="menu-item">
                  <div class="menu-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-1wit1pw iconify iconify--ant-design" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M858.5 763.6a374 374 0 0 0-80.6-119.5a375.6 375.6 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1c-.4.2-.8.3-1.2.5c-44.8 18.9-85 46-119.5 80.6a375.6 375.6 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8c2-77.2 33-149.5 87.8-204.3c56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2M512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362s17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362s-17.9 89.1-50.4 121.6S557.9 534 512 534"></path></svg>                    </div>
                  Profile
                </a>
              </div>
              <hr class="divider">
              <li (click)="logout()" class="menu-item logout">
                <div class="menu-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-12z0wuy iconify iconify--ic" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M5 5h7V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5zm16 7l-4-4v3H9v2h8v3z"></path></svg>                  </div>
                D√©connexion
              </li>
            </div>
            

          </div>
          
          
          
              </div>
       
    
      </div>  
    
    </div>
        </div>

             <div class="css-1byr0tz">
    
      <div class="MuiBox-root css-0">
          <div class="MuiContainer-root MuiContainer-maxWidthLg css-1qsxih2">
              <h4 class="MuiTypography-root MuiTypography-h4 css-sko12q">Mes Projets</h4>
              <div class="MuiTypography-root MuiTypography-p css-yq9a6z">Choisissez un projet ou cr√©ez-en un nouveau.</div>
          <div class="list-project">
         <div style="width: 100%;">
          <div class="css-isbt42">
              <div class="createproject"  (click)="openCreate()">        
                     
                          <mat-icon>add</mat-icon>  
                                
           </div>
           <div  class="css-z5duxk"  *ngFor="let project of projects "> 
             
              <div class="css-mm5vp">
                  
                  <div class="container">
                      <div><img *ngIf="projectImages[project.idProjet]" [src]="projectImages[project.idProjet]" alt="Project Image" class="small-image">
                          <span *ngIf="!projectImages[project.idProjet]">Image Loading...</span></div>
                  </div> 
                      <div>
                      <button type="button"  (click)="openDelete(project.idProjet)" class="css-mwubz9"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-0 iconify iconify--bi" sx="[object Object]" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><g fill="currentColor"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"></path><path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"></path></g></svg>
                      </button>
                 
                  </div>
             <div >
                  <div class="projectInfo">
                    <div class="role" >
                     Projet
                      </div>
                      
                      
                      
                      <div class="nomproject">{{project.nomProjet}}</div></div>
  <div >
    <div class="progress-container">
        <div class="progress-bar" [style.width.%]="projectProgress[project.idProjet]">
        </div>
    </div>
    
    
    
  </div>
  </div>         
                  <div class="buttons">
                    <button (click)="saveProjectId(project.idProjet)" [routerLink]="['/canvas']" class="css-1ybokyr" tabindex="0" type="button">
                      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-1xlzgj9 iconify iconify--codicon"  height="1em" viewBox="0 0 16 16">
                          <path fill="currentColor" d="M13.5 2h-12l-.5.5v11l.5-.5h12l.5-.5v-11zM2 3h11v1H2zm7 4H6V5h3zm0 1v2H6V8zM2 5h3v2H2zm0 3h3v2H2zm0 5v-2h3v2zm4 0v-2h3v2zm7 0h-3v-2h3zm0-3h-3V8h3zm-3-3V5h3v2z"></path>
                      </svg>
                      <div class="textbutton">Canvas</div>
                  </button>
                  
                      <button class="css-1ybokyr" tabindex="0" type="button">
                          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="MuiBox-root css-1xlzgj9 iconify iconify--akar-icons" sx="[object Object]" height="1em" viewBox="0 0 24 24">
                              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2 6s1.5-2 5-2s5 2 5 2v14s-1.5-1-5-1s-5 1-5 1zm10 0s1.5-2 5-2s5 2 5 2v14s-1.5-1-5-1s-5 1-5 1z"></path>
                          </svg>
                          <div class="textbutton">Business Plan</div>
                          
                      </button>
                  </div></div> 
                  </div>
                  </div>
                  </div>
         <div></div>
           <div></div>
           <div></div>
          </div>
         
          </div>
      </div>  
      
  </div>
  </div>
     
  <dialog *ngIf="showPopup" class="popup-container" (click)="closeDialog($event)">
       <div class="popup" (click)="preventClose($event)">
      <p class="titre">Nouveau projet</p>
      <form  [formGroup]="projectForm" (ngSubmit)="onSubmit()"> 
      <div class="inputpopup">
      
     <div> <input class="inputtitre" placeholder="D√©nomination social du projet" formControlName="nomProjet" ></div>
     <div class="inputphtoto">
     <div>
      <input type="file" class="image" id="fileInput" style="display: none;" formControlName="image" (change)="onFileSelected($event)" >
      <label for="fileInput" class="fileInputLabel">
        <img [src]="projectForm.get('image')?.value ? getImageSrc(projectForm.get('image')!.value) : 'assets/project.jpg'" alt="Selected file" height="200rem">
      </label>
  </div>
  </div>
  </div>
      <button type="submit" class="ajouter" >Ajouter</button>
  </form>
  </div></dialog>
  
  
  <dialog *ngIf="showPopupdelte" class="popup-container-delete" > 
      <div class="popup-delete" (click)="preventClose($event)">
          <div>
      <p class="titredelete">Voulez-vous vraiment supprimer ce projet ?</p>
      <p class="warning">Cette action est irr√©versible</p>
          </div>
      
      <div class="buttondete">
      <button (click)="closeDeletePopup()" class="annuler">Annuler</button>
      <button (click)="onDelete()" class="suppr">Supprimer</button>
       </div>
  
  </div></dialog>